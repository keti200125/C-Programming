
# Упражнение 10

_**Примерен вариант за реализиране на състезание между два процеса за**_  _**използване на общ ресурс**_

  

**Задача** Да се напише програма на Си, която реализира състезание между два процеса _(__вариант с общ ресурс – файл__)_.

Програмата :

1.  създава/отваря_съществуващ файл;
    
2.  инициализира/записва в началото му начална числова стойност (примерно 0);
    
3.  стартира нов процес (примитив fork);
    
4.  двата процеса (детски и родителски) многократно (цикъл с достатъчен брой итерации) изпълняват една и съща последователност от действия :
    

-   позициониране на едно и също място във файла (началото)
    
-   прочитане на целочислена стойност
    
-   модифициране на стойността (добавяне константна стойност – 1 или 2)
    
-   извеждане на модифицираната стойност на стандартния изход
    

	(целта е предизвикване на входно/изходно прекъсване и удължаване времето за работа на съответния процес)

	Оформяне на изходите с различен отстъп спрямо началото на реда в различните процеси дава добра възможност за следене на смяната им по време на изпълнение като резултат от диспечеризацията

-   позициониране на същото място (началото)
    
-   запис на модифицираната стойност на мястото на прочетената.
    

  

_Очакван резултат_ _–_ при продължителна работа на процесите, в резултат от диспечеризацията на процесите и преразпределение на отделеното процесорно време, се реализират прекъсвания между операциите на четене и модифициране от една страна и записа на изменената стойност на мястото на прочетената от друга, при което се губи, макар и малка, част от натрупваните от процесите стойности - крайният резултат не се явява точната сума на всички добавени (сумирани) стойности.

  

  

  

  

  

  

_Забележка_ 
1) Пренасочването на изхода по време на изпълнение във файлa дава възможност, от една страна за по-подробното му разглеждане и анализиране след прикючването, а от друга – по този начин се избягва блокиране на конзолата за продължителен период, което е резултатът при директното извеждане на стандартния изход, независимо, че процесът е приключил изпълнение.

2) Позициониране с прочитане и извеждане на крайния резултат в общата част, след приключване работата на двата процеса, също дава добра представа за ефекта от реализираното състезание.